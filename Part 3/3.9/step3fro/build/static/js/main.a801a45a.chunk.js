(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(43)},25:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),o=n.n(i),u=(n(25),n(16)),l=n(13),c=n(14),s=n(17),m=n(15),f=n(18),h=function(e){var t=e.value,n=e.handleFilterChange;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4",r.a.createElement("input",{value:t,onChange:n}))},d=function(e){var t=e.addPerson,n=e.newName,a=e.handleNameChange,i=e.newNumber,o=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:i,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},p=function(e){var t=e.persons,n=e.filter,a=e.removePerson;return r.a.createElement("div",null,r.a.createElement("h3",null,"Numerot"),r.a.createElement("table",null,r.a.createElement("tbody",null,t.filter(function(e){return e.name.toLowerCase().includes(n.toLowerCase())}).map(function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{name:e.name,id:e.id,onClick:a},"poista")))}))))},v=n(2),N=n.n(v),b="/api/persons",w={getAll:function(){return N.a.get(b).then(function(e){return e.data})},create:function(e){return N.a.post(b,e).then(function(e){return e.data})},remove:function(e){return N.a.delete("".concat(b,"/").concat(e)).then(function(e){return e.data})},update:function(e,t){return N.a.put("".concat(b,"/").concat(e),t).then(function(e){return e.data})}},g=function(e){var t=e.msg;return null===t?null:r.a.createElement("div",{className:"notification"},t)},E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).setNotification=function(e){n.setState({notification:e}),setTimeout(function(){n.setState({notification:null})},5e3)},n.addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber},a=-1;n.state.persons.forEach(function(e){return e.name===t.name?a=e.id:0}),-1===a?(w.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:""})}),n.setNotification("Lis\xe4ttiin henkil\xf6 ".concat(t.name,"."))):window.confirm("".concat(t.name," on jo luettelossa, korvataanko?"))&&w.update(a,t).then(function(e){var a=Object(u.a)(n.state.persons);a.forEach(function(t){return t.id===e.id?t.number=e.number:0}),n.setState({persons:a,newName:"",newNumber:""}),n.setNotification("Muutettiin henkil\xf6n ".concat(t.name," numero."))}).catch(function(e){n.setNotification("Henkil\xf6 ".concat(t.name," on jo poistettu.")),w.getAll().then(function(e){return n.setState({persons:e,newName:"",newNumber:""})})})},n.removePerson=function(e){var t=e.target.getAttribute("id"),a=e.target.getAttribute("name");window.confirm("Poistetaanko ".concat(a,"?"))&&w.remove(t).then(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.id.toString()!==t})}),n.setNotification("Poistettiin henkil\xf6 ".concat(a,"."))}).catch(function(e){n.setNotification("Henkil\xf6 ".concat(a," on jo poistettu.")),w.getAll().then(function(e){return n.setState({persons:e,newName:"",newNumber:""})})})},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.state={persons:[],newName:"",newNumber:"",filter:"",notification:null},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getAll().then(function(t){return e.setState({persons:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(g,{msg:this.state.notification}),r.a.createElement(h,{value:this.state.filter,handleFilterChange:this.handleFilterChange}),r.a.createElement(d,{addPerson:this.addPerson,newName:this.state.newName,handleNameChange:this.handleNameChange,newNumber:this.state.newNumber,handleNumberChange:this.handleNumberChange}),r.a.createElement(p,{persons:this.state.persons,filter:this.state.filter,removePerson:this.removePerson}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.a801a45a.chunk.js.map